@using Academy.Domain.Enums.Ticket
@model Academy.Domain.ViewModels.TicketMessage.Admin.AdminCreateTicketMessageViewModel

<div>
    <form asp-area="Admin"
          asp-controller="Ticket"
          asp-action="CreateTicketMessage"
          enctype="multipart/form-data">
        <input asp-for="SenderId" type="hidden"/>
        <input asp-for="TicketId" type="hidden"/>
        @if (Model.TicketStatus is not TicketStatus.Closed)
        {
            <textarea asp-for="Message" data-tw-merge="" ckeditor placeholder="پیام خود را وارد کنید ..." rows="5"
                      class="disabled:bg-slate-100 disabled:cursor-not-allowed dark:disabled:bg-darkmode-800/50 dark:disabled:border-transparent [&[readonly]]:bg-slate-100 [&[readonly]]:cursor-not-allowed [&[readonly]]:dark:bg-darkmode-800/50 [&[readonly]]:dark:border-transparent transition duration-200 ease-in-out w-full text-sm border-slate-200 shadow-sm placeholder:text-slate-400/90 focus:ring-4 focus:ring-primary focus:ring-opacity-20 focus:border-primary focus:border-opacity-40 dark:bg-darkmode-800 dark:border-transparent dark:focus:ring-slate-700 dark:focus:ring-opacity-50 dark:placeholder:text-slate-500/80 group-[.form-inline]:flex-1 group-[.input-group]:rounded-none rtl:group-[.input-group]:[&:not(:first-child)]:border-r-transparent ltr:group-[.input-group]:[&:not(:first-child)]:border-l-transparent rtl:group-[.input-group]:first:rounded-r ltr:group-[.input-group]:first:rounded-l rtl:group-[.input-group]:last:rounded-l ltr:group-[.input-group]:last:rounded-r group-[.input-group]:z-10 -mb-1.5 resize-none rounded-xl rtl:pl-16 ltr:pr-16"></textarea>
            <span asp-validation-for="Message"></span>
            <div class="flex border-slate-200/80 mt-5 justify-between">
                <div class="flex gap-2">
                    <div>
                        <button type="submit" data-tw-merge=""
                                class="transition duration-200 border shadow-sm inline-flex items-center justify-center py-2 rounded-md font-medium cursor-pointer focus:ring-4 focus:ring-primary focus:ring-opacity-20 focus-visible:outline-none dark:focus:ring-slate-700 dark:focus:ring-opacity-50 [&:hover:not(:disabled)]:bg-opacity-90 [&:hover:not(:disabled)]:border-opacity-90 [&:not(button)]:text-center disabled:opacity-70 disabled:cursor-not-allowed text-primary dark:border-primary [&:hover:not(:disabled)]:bg-primary/10 w-full border-primary/50 px-10 md:w-auto">
                            <i data-tw-merge="" data-lucide="send"
                               class="rtl:-mr-2 ltr:-ml-2 rtl:ml-2 ltr:mr-2 h-4 w-4 stroke-[1.3]"></i>
                            ارسال
                        </button>
                    </div>
                    <div>
                        <input asp-for="Attachment" type="file" class="hidden" ImageInput="1"/>
                        <span asp-validation-for="Attachment"></span>
                        <a href="javascript:void(0)" ImageButton="1"
                           type="button"
                           class="transition duration-200 border shadow-sm inline-flex items-center justify-center py-2 rounded-md font-medium cursor-pointer focus:ring-4 focus:ring-primary focus:ring-opacity-20 focus-visible:outline-none dark:focus:ring-slate-700 dark:focus:ring-opacity-50 [&:hover:not(:disabled)]:bg-opacity-90 [&:hover:not(:disabled)]:border-opacity-90 [&:not(button)]:text-center disabled:opacity-70 disabled:cursor-not-allowed text-primary dark:border-primary [&:hover:not(:disabled)]:bg-primary/10 w-full border-primary/50 px-10 md:w-auto"
                           title="ضمیمه">
                            <i data-tw-merge="" data-lucide="paperclip"
                               class="rtl:-mr-2 ltr:-ml-2 rtl:ml-2 ltr:mr-2 h-4 w-4 stroke-[1.3]"></i>
                            فایل ضمیمه
                        </a>
                    </div>
                </div>
                <div>
                    @if (Model.TicketStatus is not TicketStatus.Closed)
                    {
                        <a class="btn transition duration-200 border shadow-sm inline-flex items-center justify-center py-2 rounded-md font-medium cursor-pointer focus:ring-4 focus:ring-primary focus:ring-opacity-20 focus-visible:outline-none dark:focus:ring-slate-700 dark:focus:ring-opacity-50 [&:hover:not(:disabled)]:bg-opacity-90 [&:hover:not(:disabled)]:border-opacity-90 [&:not(button)]:text-center disabled:opacity-70 disabled:cursor-not-allowed text-primary dark:border-primary [&:hover:not(:disabled)]:bg-primary/10 w-full border-primary/50 px-10 md:w-auto"
                           asp-area="Admin"
                           asp-controller="Ticket"
                           asp-action="ToggleClose"
                           asp-route-id="@Model.TicketId">
                            <i data-tw-merge="" data-lucide="ban"
                               class="rtl:-mr-2 ltr:-ml-2 rtl:ml-2 ltr:mr-2 h-4 w-4 stroke-[1.3]"></i>
                            بستن تیکت
                        </a>
                    }
                </div>
            </div>
        }
        else
        {
            <div class="flex border-slate-200/80 justify-between">
                <div class="flex gap-2">
                    <div class="rtl:mr-auto ltr:ml-auto flex gap-2">
                    <span data-placement=""
                          class="flex items-center justify-center rounded-md border bg-primary/5 p-2 text-red-900 border-red-900">
                این تیکت توسط ادمین بسته شده است و امکان ارسال پیام وجود ندارد.</span>
                    </div>
                </div>
                <div>
                    <a class="btn transition duration-200 border shadow-sm inline-flex items-center justify-center py-2 rounded-md font-medium cursor-pointer focus:ring-4 focus:ring-primary focus:ring-opacity-20 focus-visible:outline-none dark:focus:ring-slate-700 dark:focus:ring-opacity-50 [&:hover:not(:disabled)]:bg-opacity-90 [&:hover:not(:disabled)]:border-opacity-90 [&:not(button)]:text-center disabled:opacity-70 disabled:cursor-not-allowed text-primary dark:border-primary [&:hover:not(:disabled)]:bg-primary/10 w-full border-primary/50 px-10 md:w-auto"
                       asp-area="Admin"
                       asp-controller="Ticket"
                       asp-action="ToggleClose"
                       asp-route-id="@Model.TicketId">
                        <i data-tw-merge="" data-lucide="rotate-ccw"
                           class="rtl:-mr-2 ltr:-ml-2 rtl:ml-2 ltr:mr-2 h-4 w-4 stroke-[1.3]"></i>
                        بازکردن تیکت
                    </a>
                </div>
            </div>
        }
    </form>
</div>